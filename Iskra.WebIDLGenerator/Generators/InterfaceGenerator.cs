using Iskra.WebIDLGenerator.Extensions;
using Iskra.WebIDLGenerator.Models;

namespace Iskra.WebIDLGenerator.Generators;

public class InterfaceGenerator
{
    public string Generate(InterfaceType input, string ns)
    {
        var baseTypeName = input.Inheritance ?? "JSObjectProxy";

        var body = "";

        var content = $$"""
                        // <auto-generated/>

                        using System.Runtime.InteropServices.JavaScript;
                        using Iskra.JSCore;

                        namespace {{ns}};

                        #nullable enable

                        public partial class {{input.Name}}(JSObject obj): {{baseTypeName}}(obj)
                        {
                        {{body.IndentLines(4)}}
                        }

                        #nullable disable
                        """;

        return content;
    }
}